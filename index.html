<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
    // Função para obter o parâmetro 'data' da URL
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    // Função para criar a lista de jogos dinamicamente
    function displayGames() {
        const gamesListElement = document.getElementById('game-list');
        const gameDataString = getQueryParam('data');

        if (!gameDataString) {
            gamesListElement.innerHTML = '<p>Nenhum jogo disponível hoje.</p>';
            return;
        }

        try {
            // Decodifica a string da URL e a converte de volta para um objeto JSON
            const games = JSON.parse(decodeURIComponent(gameDataString));

            games.forEach(game => {
                const li = document.createElement('li');
                li.className = 'game-item';

                const gameInfo = document.createElement('div');
                gameInfo.className = 'game-info';
                gameInfo.innerHTML = `
                    <h3>${game.time} - ${game.teams}</h3>
                    <p class="league">${game.league}</p>
                `;

                const analyzeButton = document.createElement('button');
                analyzeButton.className = 'analyze-button';
                analyzeButton.textContent = 'Analisar';

                li.appendChild(gameInfo);
                li.appendChild(analyzeButton);
                gamesListElement.appendChild(li);
            });
        } catch (e) {
            gamesListElement.innerHTML = '<p>Erro ao carregar os dados dos jogos.</p>';
        }
    }

    // Chama a função para exibir os jogos quando a página é carregada
    displayGames();
</script>
