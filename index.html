<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise de Jogos</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: sans-serif;
            background-color: #212121;
            color: white;
            padding: 10px;
            margin: 0;
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        .header h1 {
            color: #4CAF50;
            font-size: 24px;
        }
        .game-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .game-item {
            background-color: #333;
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .game-item .league {
            font-size: 14px;
            color: #ccc;
        }
        .game-item .teams {
            font-size: 18px;
            font-weight: bold;
            margin: 5px 0;
        }
        .game-item .time {
            font-size: 14px;
            color: #aaa;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Análise de Jogos</h1>
    </div>

    <div class="game-list" id="game-list">
        <p style="text-align: center;">Carregando jogos...</p>
    </div>

    <script>
        const Telegram = window.Telegram.WebApp;

        // Quando a página carrega, ela notifica o bot que está pronta
        Telegram.ready();
        Telegram.sendData("ready");
        
        // Recebe os dados do bot quando ele os envia
        Telegram.onEvent('data', (data) => {
            try {
                const games = JSON.parse(data);
                const gameListDiv = document.getElementById('game-list');
                gameListDiv.innerHTML = ''; // Limpa a mensagem de carregamento
                
                if (games.length > 0) {
                    games.forEach(game => {
                        const gameItem = document.createElement('div');
                        gameItem.className = 'game-item';
                        
                        const league = document.createElement('div');
                        league.className = 'league';
                        league.textContent = game.league;
                        
                        const teams = document.createElement('div');
                        teams.className = 'teams';
                        teams.textContent = game.teams;
                        
                        const time = document.createElement('div');
                        time.className = 'time';
                        time.textContent = `Horário: ${game.time}`;
                        
                        gameItem.appendChild(league);
                        gameItem.appendChild(teams);
                        gameItem.appendChild(time);
                        
                        gameListDiv.appendChild(gameItem);
                    });
                } else {
                    gameListDiv.innerHTML = '<p style="text-align: center;">Nenhum jogo encontrado para análise no momento. Tente novamente mais tarde.</p>';
                }
            } catch (e) {
                console.error("Erro ao analisar os dados: ", e);
                document.getElementById('game-list').innerHTML = '<p style="text-align: center;">Erro ao carregar os dados dos jogos.</p>';
            }
        });
    </script>
</body>
</html>
